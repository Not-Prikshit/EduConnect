<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduConnect - College Clubs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'] },
                    colors: { primary: '#6366f1', dark: '#0f172a' }
                }
            }
        }
    </script>
</head>

<body
    class="bg-slate-50 dark:bg-slate-900 min-h-screen font-sans text-slate-800 dark:text-white transition-colors duration-300">

    <div class="container mx-auto p-8">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1
                    class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-purple-500">
                    College Clubs</h1>
                <p class="text-slate-500 dark:text-slate-400 mt-1">Join a community, learn new skills.</p>
            </div>
            <button onclick="history.back()"
                class="px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-all">Back
                to Dashboard</button>
        </div>

        <div id="clubs-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Clubs rendered here -->
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Clubs Logic
        const currentUser = JSON.parse(localStorage.getItem('edu_current_user'));
        if (!currentUser) window.location.href = 'index.html';

        async function renderClubs() {
            const grid = document.getElementById('clubs-grid');
            try {
                const clubs = await api.getClubs();

                grid.innerHTML = clubs.map(club => {
                    return `
                        <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg overflow-hidden border border-slate-100 dark:border-slate-700">
                            <div class="h-32 bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center">
                                <span class="text-4xl">ðŸŽ©</span>
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-bold mb-2 text-slate-800 dark:text-white">${club.name}</h3>
                                <p class="text-slate-500 dark:text-slate-400 text-sm mb-4">${club.description}</p>
                                
                                <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-4">
                                    <span>ðŸ‘‘ President: ${club.president}</span>
                                </div>

                                <!-- Team Members Section -->
                                <div class="mt-4 space-y-3">
                                    <h4 class="text-sm font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wide">Team Members</h4>
                                    
                                    ${club.teamMembers && club.teamMembers.tech && club.teamMembers.tech.length > 0 ? `
                                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3">
                                            <p class="text-xs font-bold text-blue-700 dark:text-blue-300 mb-2">ðŸ’» Tech Team</p>
                                            <div class="flex flex-wrap gap-2">
                                                ${club.teamMembers.tech.map(member => `
                                                    <span class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-200 rounded-full">
                                                        ${member}
                                                    </span>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}

                                    ${club.teamMembers && club.teamMembers.design && club.teamMembers.design.length > 0 ? `
                                        <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3">
                                            <p class="text-xs font-bold text-purple-700 dark:text-purple-300 mb-2">ðŸŽ¨ Design Team</p>
                                            <div class="flex flex-wrap gap-2">
                                                ${club.teamMembers.design.map(member => `
                                                    <span class="text-xs px-2 py-1 bg-purple-100 dark:bg-purple-800 text-purple-700 dark:text-purple-200 rounded-full">
                                                        ${member}
                                                    </span>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}

                                    ${club.teamMembers && club.teamMembers.pr && club.teamMembers.pr.length > 0 ? `
                                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3">
                                            <p class="text-xs font-bold text-green-700 dark:text-green-300 mb-2">ðŸ“¢ PR & Outreach Team</p>
                                            <div class="flex flex-wrap gap-2">
                                                ${club.teamMembers.pr.map(member => `
                                                    <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-200 rounded-full">
                                                        ${member}
                                                    </span>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>

                                <div class="flex items-center justify-between mt-6 pt-4 border-t border-slate-100 dark:border-slate-700">
                                    <span class="text-xs font-medium px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300">${club.members.length} Members</span>
                                    ${currentUser.role === 'student' && club.whatsappLink ? `
                                        <a href="${club.whatsappLink}" target="_blank" class="px-4 py-2 rounded-lg text-sm font-medium transition-all bg-green-600 text-white hover:bg-green-700 flex items-center gap-2">
                                            <span>ðŸ’¬</span> Join via WhatsApp
                                        </a>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                grid.innerHTML = `<p class="text-red-500 col-span-full text-center">Error loading clubs: ${error.message}</p>`;
            }
        }

        renderClubs();
    </script>
</body>

</html>