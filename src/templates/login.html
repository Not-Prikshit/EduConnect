{% extends "base.html" %}
{% block content %}
<h2>Login</h2>

<form method="post" action="{{ url_for('login') }}">
  <label><input type="radio" name="role" value="student" checked> Student</label>
  <label><input type="radio" name="role" value="teacher"> Teacher</label>

  <div id="student-fields">
    <p><input type="text" name="student_name" placeholder="Your name (Student)"></p>
    <p><input type="email" name="student_email" placeholder="Your email (Student)"></p>
  </div>

  <div id="teacher-fields" style="display:none;">
    <p>
      <select name="teacher_name">
        <option value="">-- Select Teacher --</option>
        {% for t in faculty %}
        <option value="{{ t }}">{{ t }}</option>
        {% endfor %}
      </select>
    </p>
    <p>Or type teacher name: <input type="text" name="teacher_name_typed" placeholder="Teacher1"></p>
  </div>

  <button type="submit">Login</button>
</form>

<script>
  const studentRadio = document.querySelector('input[value="student"]');
  const teacherRadio = document.querySelector('input[value="teacher"]');
  const studentFields = document.getElementById('student-fields');
  const teacherFields = document.getElementById('teacher-fields');
  function toggle() {
    if (studentRadio.checked) {
      studentFields.style.display = 'block';
      teacherFields.style.display = 'none';
    } else {
      studentFields.style.display = 'none';
      teacherFields.style.display = 'block';
    }
  }
  studentRadio.addEventListener('change', toggle);
  teacherRadio.addEventListener('change', toggle);
  toggle();
</script>
{% endblock %}
